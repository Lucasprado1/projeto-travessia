<div class="container">
    <app-header>
    </app-header>
    <div class="body">
        <div>
            <p>Gerador de Relatório</p>
        </div>
        <div>
            <mat-form-field style="width: 100%">
                <mat-label>Selecione a operação</mat-label>
                <mat-select [(ngModel)]="selectedOperation">
                    <mat-option *ngFor="let operation of operations" [value]="operation.value">
                        {{operation.viewValue}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div>
            <mat-form-field style="width: 100vh">
                <mat-label>Data de Fechamento</mat-label>
                <input matInput [matDatepicker]="picker"  [(ngModel)]="selectedDate">

                <mat-hint style="opacity: 0.20; color: #EEEEEE">DD/MM/YYYY</mat-hint>
                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
        </div>
        <div class="attach-file-class">
            <input type="file" class="file-input" (change)="onFileSelected($event)" id="fileInput">
            <div class="file-upload" (click)="triggerFileInput()">
                <b style="width: 173px; margin-right: 2vh; color: #FFFFFF99; font-weight:410;"> {{fileName? "Base selecionada!": "Selecione a base" }} </b>

                <button mat-fab extended color="primary" color="accent" [disabled]="false" class="upload-btn">
                    <mat-icon>attach_file</mat-icon>
                </button>
                
            </div>
        </div>
        <p style="opacity: 0.20; color: #EEEEEE; margin-top: -1.8vh; margin-right:2.4vh">{{ fileName || "Nenhum arquivo foi selecionado"}}</p>

        <button [disabled] = "!fileName"
        (click)="generateReport()"
        mat-raised-button color="accent" 
        style="margin-top: 4.5vh; width: 180px; height: 50px; font-size: 14px;">
        {{fileName? "Gerar": "Aguardando Base..." }}
        
        </button>

        <div style="margin-top: 5vh;"class="attach-file-class">
            <!-- <input type="file" class="file-input" (change)="onFileSelected($event)" id="fileInput"> -->
            <div class="file-upload">
                <b style="width: 173px; margin-right: 2vh; color: #FFFFFF99; font-weight:410;"> {{fileName? "Arquivo selecionado" : "Aguardando arquivo" }} </b>

                <button mat-fab extended color="primary" color="accent" 
                [disabled]="!reportGenerated"
                (click)="downloadReport()" [ngClass]="{'link': reportGenerated}"
                class="download-btn">
                    <mat-spinner *ngIf="isGenerating" color="accent" style="width: 3vh; height: 3vh;"></mat-spinner>
                    <mat-icon style="text-align: justify ;float: left !important" *ngIf="!isGenerating">download_file</mat-icon>
                </button>
                
            </div>
        </div>
        <p *ngIf="!fileName" style="opacity: 0.20; color: #EEEEEE; margin-top: -1.8vh; margin-right:2.4vh">Nenhum arquivo foi selecionado</p>
    </div>
</div>